
<!DOCTYPE html>
<html x-ng-app="employeeApp">
<head>
<meta charset="ISO-8859-1">
<title>Insert title here</title>

<script type="text/javascript" src="angular.min.js"></script>
<script src="angular-route.js"> </script>
<script type="text/javascript">
	var employeeApp=angular.module("employeeApp",['ngRoute']);
	employeeApp.config(function($routeProvider){
		
		$routeProvider
		.when("/addEmployee",{
			templateUrl:"addEmployee.htm",
			controller:'employeeController'
		})
		.when("/getAllEmployees",{
			templateUrl:"employeeList.htm",
			controller:'employeeController'
		})
		.when("/updateDelEmployee",{
			templateUrl:"updateDelList.htm",
			controller:'employeeController'
		})
		.when("/updateEmployee",{
			templateUrl:"updateEmployeeForm.htm",
			controller:'employeeController'
		});
	})
	
	employeeApp.controller('employeeController',['$scope','$http','$log',function($scope,$http,$log){
		$scope.addEmployee=(e)=>{
			$http({
					url:'employee?action=addEmployee',
					method:'POST',
					data:{
						'employeeId':e.employeeId,
						'firstName':e.firstName,
						'lastName':e.lastName,
						'email':e.email,
						'phoneNumber':e.phoneNumber,
						'hireDate':e.hireDate,
						'jobId':e.jobId,
						'salary':e.salary,
						'commissionPCT':e.commissionPCT,
						'managerId':e.managerId,
						'departmentId':e.departmentId,
					}})
			.then(
			res=>{
				$scope.status=res.data;
			},
			err=>{
				$log.error(err);
			}
			);
		}
		
	
		$scope.getAllEmployee=()=>{
			console.log("aaaaaaaa")
			$http({url:"employee?action=getAllEmployee"})
			.then(function(response){
				$scope.employees=response.data;
			},
		function(response){
				$log.error(response);
			}
		
		);
		}
		
		$scope.deleteEmp=function(e)
		{
			console.log(e);
			$http({url:"employee?action=deleteEmployee",
				method:'POST',
				data: {
				 	'employeeId':e
				 	}
			})
			.then(function(response){
				console.log(response.data);
				$scope.message=response.data;
			},
		function(response){
				$log.error(response);
			}
			
			
		
		);
			
			
		}
		$scope.updateEmployee=function(e){
			$http({
				url:'employee?action=updateEmployee',
				method:'POST',
				 data: {
					 	'employeeId':e.employeeId,
						'firstName':e.firstName,
						'lastName':e.lastName,
						'email':e.email,
						'phoneNumber':e.phoneNumber,
						'hireDate':e.hireDate,
						'jobId':e.jobId,
						'salary':e.salary,
						'commissionPCT':e.commissionPCT,
						'managerId':e.managerId,
						'departmentId':e.departmentId
					 }
			}).then((res)=>{
				console.log(res.data);
				$scope.message=res.data;
			},(err)=>{
				$log.error(err);
			});
		};
	
	
		
	}]);
</script>
</head>
<body x-ng-controller="employeeController">
<p><a href="#/">Home Page</a></p>
<p><a href="#/getAllEmployees" x-ng-init='getAllEmployee()'>Get Employee List</a></p>
<p><a href="#/updateDelEmployee">update/delete Employee</a></p>
<p><a href="#/addEmployee">Register Employee</a></p>
<div x-ng-view></div>
		

</body>

</html>